<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Freemarker界面</title>
    <!-- head 中 -->
    <link rel="stylesheet" href="https://cdn.bootcss.com/weui/1.1.3/style/weui.min.css">
    <link rel="stylesheet" href="https://cdn.bootcss.com/jquery-weui/1.2.1/css/jquery-weui.min.css">
</head>
<body>
    <div class="page">
        <div class="weui-grids">
            <#list sList as sVal>
                <a href="javascript:" class="weui-grid">
                    <div class="weui-grid__icon">
                        <img src="https://dss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=2534506313,1688529724&fm=26&gp=0.jpg" alt="">
                    </div>
                    <p class="weui-grid__label">${sVal}</p>
                </a>
            </#list>
        </div>

        <div class="page__bd">
            <div  id="popNum" class="button-sp-area">
                <a href="javascript:" class="weui-btn weui-btn_primary">随机出栈</a>
                <a href="javascript:" class="weui-btn weui-btn_warn">重置</a>
            </div>
        </div>
    </div>
</body>
<!-- body 最后 -->
<script src="https://cdn.bootcss.com/jquery/1.11.0/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/jquery-weui/1.2.1/js/jquery-weui.min.js"></script>
<script type="text/javascript">
    function getSetMembers(){
        $.ajax({
            url:'/xpro/jedisController/getSetsList',
            method:'POST',
            success:function(data){
                var beginDiv = '<span class="viewSpan">';

                var endDiv = '</span>';

                var viewStr = '';

                var listData = data.split(",");
                console.log(listData);
                for(var i=0;i<listData.length;i++){
                    viewStr += beginDiv;
                    viewStr += listData[i];
                    viewStr += endDiv;
                }
                $('#sListDiv').html(viewStr);
            }
        });
    }
    $(function(){
        getSetMembers();

        //点击出栈
        $('#popNum').bind('click',function(){
            $.ajax({
                url:'/xpro/jedisController/delSets',
                method:'POST',
                success:function(data){
                    if(data == ""){
                        $('#randomNum').html("出栈值:"+"<span style='padding:3px;display:inline-block;;color:red;'>集合为空,无法获取数据!!</span>");
                    } else {
                        var beginSpan = '<span class="randomSpan">';

                        var endSpan = '</span>';
                        $('#randomNum').html("出栈值:"+beginSpan+data+endSpan);
                        getSetMembers();
                    }
                }
            });
        });

        //重置
        $('#resetNum').bind('click',function(){
            //判断输入数据是否正确
            var setNum = $('input[name=setNum]').val();
            if((''==setNum) || setNum >=100){
                alert('请输入100以内整数数值');
                return;
            } else if(!$.isNumeric(setNum)) {
                alert('请输入合法数值!!');
                return;
            }
            $.ajax({
                url:'/xpro/jedisController/resetSetsList?setNum='+setNum,
                method:'GET',
                success:function(data){
                    if(data == "success"){
                        getSetMembers();

                        $('#randomNum').html("出栈值:");
                    }
                }
            });
        });
    });
</script>
</html>